$("#home").live("pageinit",function(b){var a={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return(a.Android()||a.BlackBerry()||a.iOS()||a.Opera()||a.Windows())}};if(!a.any()){$.mobile.changePage($("#ui-desktop-browser"),"pop",false,true)}});var feedCache={};$("#listpage").live("pageshow",function(b){var a="http://www.rottentomatoes.com/syndication/rss/upcoming.xml";$("h1",this).text("Upcoming Movies");if(!feedCache[a]){$("#listcontents").html("<p>Fetching data...</p>");$.get("https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&q="+encodeURI(a)+"&callback=?",{},function(d,e){if(d.responseStatus==200){feedCache[a]=d.responseData.feed.entries;displayFeed(a)}else{var c="<p>Sorry, the movie feed could not be loaded:</p><p>"+d.responseDetails+"</p>";$("#listcontents").html(c)}},"json")}else{displayFeed(a)}});function displayFeed(b){var a=feedCache[b];var d="<ul data-role='listview' data-inset='true'id='entrylist'>";for(var c=0;c<a.length;c++){var e=a[c];e.title=e.title.replace(/\d+(?:\.\d+)?% ?/g,"");d+="<li><a href='movie_info.html?entry="+c+"&url="+encodeURI(b)+"'>"+e.title+"</a></li>"}d+="</ul>";$("#listcontents").html(d);$("#entrylist").listview()}var rt_url="";$("#infopage").live("pageshow",function(g){var d=$(this).data("url").split("?")[1];d=d.replace("?","");var f=d.split("&");var b=f[0].split("=")[1];var a=f[1].split("=")[1];var c=feedCache[a][b];$("h1",this).text(c.title);$("#infocontents",this).html(c.content);$("#urllink",this).attr("href","confirm_page.html");rt_url=c.link});$("#confirmPage").live("pageshow",function(a){$("#urlexternal",this).attr("href",rt_url)});